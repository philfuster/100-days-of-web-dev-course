<%- include('includes/head.ejs', { title: 'Blog Post Administration' }) %>
<link rel="stylesheet" href="/styles/auth.css">
<link rel="stylesheet" href="/styles/forms.css">
<link rel="stylesheet" href="/styles/admin.css">
</head>
  <body>
    <%- include('includes/header.ejs') %>
    <main>
      <h1>Administrate Blog Posts</h1>
      <section>
        <h2>Create a New Post</h2>
        <% if(inputData.hasError) { %>
          <p id="input-error"><%= inputData.message %></p>
        <% } %>
        <form action="/admin" method="POST">
          <input type="hidden" name="_csrf" value="<%= csrfToken %>">
          <div class="form-control">
            <label for="title">Title</label>
            <input type="text" id="title" name="title" placeholder="Blog Post Title" value="<%= inputData.title%>" required />
          </div>
          <div class="form-control">
            <label for="content">Content</label>
            <textarea name="content" id="content" placeholder="Blog Post Content" cols="30" rows="10" required><%= inputData.content %></textarea>
          </div>
          <button class="btn">Save</button>
        </form>
      </section>
      <section>
        <h2>All Blog Posts</h2>
        <% if (posts == null || posts.length == 0) { %>
          <p>Could not find any posts. You need to first create some!</p>
        <% } else { %>
          <% for(const post of posts) { %>
            <%- include("includes/post-item.ejs", { post: post }) %>
          <% } %>
        <% } %>
      </section>
    </main>
  </body>
</html>
